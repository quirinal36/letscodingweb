{% extends 'base.html' %}
{% load static %}
{% block extrahead %}
    <script src="{%static 'reservations/js/class.js'%}"></script>
    <link rel="stylesheet" href="{%static 'reservations/css/paging.css'%}"/>
    <style>
        
    </style>
{% endblock %}
{% block content %}
    
    <div id="containerWrap">
        <div class="title-style1">
            <div class="layout-center">
                <strong>교육 리스트</strong>
            </div>
        </div>
        <div class="layout-center">
            <div class="tbl-wrap scroll">
                <div>
                    <form id="eduList">
                        <select name="enabled" class="search_option">
                            {% for key, val in show_list.items %}
                                {% if enabled == key %}
                                <option value="{{key}}" selected>{{val}}</option>
                                {% else %}
                                <option value="{{key}}" >{{val}}</option>
                                {% endif %}
                            {% endfor %}
                            
                        </select>
                        
                        <select name="year" class="search_option">
                            <option value="">연도</option>
                            {% for year in year_list%}
                                {% if cur_year == year %}
                                    <option value="{{year}}" selected>
                                        {{year}}
                                    </option>
                                {% else %}
                                    <option value="{{year}}" >
                                        {{year}}
                                    </option>                            
                                {% endif %}
                            {% endfor %}
                        </select>
                        <select name="month" class="search_option">
                            <option value="">월</option>
                            {% for month in month_list%}
                                {% if cur_month == month %} 
                                    <option value="{{month}}" selected >
                                        {{month}}
                                    </option>
                                {% else %}
                                    <option value="{{month}}" >
                                        {{month}}
                                    </option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        검색결과 : {{total}}건
                        <table class="tbl1">
                            <thead>
                                <tr>
                                    <th>기간</th>
                                    <th>접수기간</th>
                                    <th>교육명</th>
                                    <th>운영일수</th>
                                    <th>모집인원</th>
                                    <th>상태</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in event_list %}
                                <tr>
                                    
                                    <td>
                                        {{item.start_date | date:'Y-m-d'}} 
                                        ~ 
                                        {{item.finish_date | date:'Y-m-d'}} 
                                    </td>
                                    <td>
                                        {{item.apply_start | date:'Y-m-d'}} 
                                        ~ 
                                        {{item.deadline | date:'Y-m-d'}} 
                                    </td>
                                    <td>
                                        <a href="{% url 'reservations:applyForm' item.id %}">
                                            {{ item.program.title }}
                                        </a>
                                    </td>
                                    <td>
                                        {{item.period}}
                                    </td>
                                    <td>
                                        {{item.capacity}}
                                    </td>
                                    <td>
                                        {% if item.apply_start <= today_date and item.deadline >= today_date%}
                                        접수중
                                        {% elif item.apply_start > today_date %}
                                        접수대기
                                        {% elif item.deadline < today_date%}
                                        접수마감
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
            {% comment %}
            <div class="bt-wrap">
                <a href="#" onclick="javascript:alert('선택된 항목이 없습니다.');" class="bt1">신청 취소</a>
            </div>
            {% endcomment %}
            <p class="text-center">
                <h5>
                    {% if page_obj.has_previous %}
                        <!--
                        <a href="?page={{page_obj.previous_page_number}}">Prev</a>
                        -->
                        <a href="javascript:void(0);" onclick="javascript:page('{{page_obj.previous_page_number}}')">Prev</a>
                    {% endif %}

                    {% for index in pagelist %}
                        {% if index == page_obj.number %}
                            <li class="page-item active">
                                <span class="page-link">{{index}}</span>
                            </li>
                        {% else %}
                            <li class="page-item">
                                <a class="page-link" href="javascript:void(0);" onclick="javascript:page('{{index}}')">{{index}}</a>
                            </li>
                        {% endif %}
                    {% endfor %}

                    {% if page_obj.has_next %}
                        <a href="?page={{page_obj.next_page_number}}">Next</a>
                    {% endif %}
                </h5>
            </p>
        </div>
    </div>    
{% endblock %}